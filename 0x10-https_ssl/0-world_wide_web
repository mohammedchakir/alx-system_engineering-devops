#!/usr/bin/env bash
# This script displays information about subdomains.

# Function to get DNS information for a subdomain
get_dns_info() {
    domain="$1"
    subdomain="$2"

    # Use dig to get DNS information for the specified subdomain
    dns_output=$(dig "${subdomain}.${domain}" | grep -A1 'ANSWER SECTION:')

    # Extract record type and destination from the DNS output
    record_type=$(echo "${dns_output}" | awk '/IN/{print $4}')
    destination=$(echo "${dns_output}" | awk '/IN/{getline; print $1}')

    # Display the information
    echo "The subdomain ${subdomain} is a ${record_type} record and points to ${destination}"
}

# Main script
domain="$1"
subdomain="$2"

# If no subdomain is specified, audit default subdomains
if [ -z "${subdomain}" ]; then
    get_dns_info "${domain}" "www"
    get_dns_info "${domain}" "lb-01"
    get_dns_info "${domain}" "web-01"
    get_dns_info "${domain}" "web-02"
else
    # If a specific subdomain is specified, audit only that subdomain
    get_dns_info "${domain}" "${subdomain}"
fi
